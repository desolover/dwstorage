### dwstorage

Сервис для хранения файлов. Библиотека во вложенном пакете `storageapi`, утилита в `main.go`.

#### Список флагов для запуска утилиты:
* `port` - прослушиваемый порт HTTP-операций API, *по умолчанию 8080*.
* `redis` - строка подключения к Redis, *по-умолчанию режим работы без Redis*.
* `dir` - путь к каталогу для сохранения файлов, сами файлы будут храниться во вложенных директориях, названия которых соответствуют первым двум символам названия файла, *по-умолчанию "./dir/"*.  
* `rps` - ограничение по количеству запросов в секунду (на каждую операцию конкретного пользователя измеряется отдельно), *по-умолчанию 2*.  
* `rps` - ограничение по размеру файла в байтах в секунду (на каждую операцию конкретного пользователя измеряется отдельно), 0 означает отсутствие лимита, *по-умолчанию 1000000 (1 мегабайт)*.

#### Список операций:
1. **Загрузка файла с сервера**  

URL: `GET /download`  
URL-параметры: `filename` - название файла.  
Загружает файл из хранилища.  
В ответе приходит содержимое файла.


2. **Удаление файла на сервере**

URL: `DELETE /delete`  
URL-параметры: `filename` - название файла.  
Удаляет файл на сервере.


3. **Получение информации о файле**

URL: `GET /info`  
URL-параметры: `filename` - название файла.  
Получает информацию (мета-данные) о файле на сервере. В режиме работы 'без Redis' вернёт ошибку.  
Ответ в формате JSON, объект с перечисленными полями:  
* `filename` - название файла
* `upload_date` - дата загрузки на сервер
* `remove_date` - дата удаления (в случае удаления)
* `is_removed` - признак удаления
* `downloads_count` - количество скачиваний


4. **Загрузка файла на сервер**  

URL: `PUT /upload`
Multipart/form-параметры:
* `file` *(файл)* - должен содержать файл с данными для сохранения.
* `md5` *(строка, необязательный)* - md5-хэш-сумма для сверки с md5-хэш-суммой файла.
* `sha1` *(строка, необязательный)* - sha1-хэш-сумма для сверки с sha1-хэш-суммой файла.
* `sha256` *(строка, необязательный)* - sha256-хэш-сумма для сверки с sha256-хэш-суммой файла.
Ответ в формате JSON, объект с перечисленными полями: `filename` - название файла.

